/**
 * Mermaid SVG Fallback Styles
 *
 * Ensures mermaid nodes and subgraphs have visible fills
 * even when Mermaid's inline styles are stripped by sanitization.
 *
 * This file is imported by mermaid.css and shared across all
 * mermaid preview contexts (code-preview, mermaid-preview-popup, mermaid-block).
 */

/* ========================================
   Light Theme (Default)
   ======================================== */

/* Flowchart nodes - fallback fills */
.mermaid-preview .node rect,
.mermaid-preview .node circle,
.mermaid-preview .node ellipse,
.mermaid-preview .node polygon,
.mermaid-preview .node path,
.mermaid-preview-content .node rect,
.mermaid-preview-content .node circle,
.mermaid-preview-content .node ellipse,
.mermaid-preview-content .node polygon,
.mermaid-preview-content .node path,
.mermaid-block-preview .node rect,
.mermaid-block-preview .node circle,
.mermaid-block-preview .node ellipse,
.mermaid-block-preview .node polygon,
.mermaid-block-preview .node path,
.code-block-live-preview.mermaid-live-preview .node rect,
.code-block-live-preview.mermaid-live-preview .node circle,
.code-block-live-preview.mermaid-live-preview .node ellipse,
.code-block-live-preview.mermaid-live-preview .node polygon,
.code-block-live-preview.mermaid-live-preview .node path {
  fill: var(--bg-color, #f0f4f8);
  stroke: var(--border-color, #9ca3af);
}

/* Subgraph/cluster background */
.mermaid-preview .cluster rect,
.mermaid-preview-content .cluster rect,
.mermaid-block-preview .cluster rect,
.code-block-live-preview.mermaid-live-preview .cluster rect {
  fill: var(--bg-secondary, #f5f5f5);
  stroke: var(--border-color, #d5d5d5);
}

/* Label text visibility */
.mermaid-preview .nodeLabel,
.mermaid-preview .label,
.mermaid-preview text {
  fill: var(--text-color, #1a1a1a);
}

/* Edge/line styles */
.mermaid-preview .edgePath path,
.mermaid-preview .flowchart-link {
  stroke: var(--text-secondary, #6b7280);
}

/* ========================================
   Dark Theme
   ======================================== */

.dark-theme .mermaid-preview .node rect,
.dark-theme .mermaid-preview .node circle,
.dark-theme .mermaid-preview .node ellipse,
.dark-theme .mermaid-preview .node polygon,
.dark-theme .mermaid-preview .node path,
.dark-theme .mermaid-preview-content .node rect,
.dark-theme .mermaid-preview-content .node circle,
.dark-theme .mermaid-preview-content .node ellipse,
.dark-theme .mermaid-preview-content .node polygon,
.dark-theme .mermaid-preview-content .node path,
.dark-theme .mermaid-block-preview .node rect,
.dark-theme .mermaid-block-preview .node circle,
.dark-theme .mermaid-block-preview .node ellipse,
.dark-theme .mermaid-block-preview .node polygon,
.dark-theme .mermaid-block-preview .node path,
.dark-theme .code-block-live-preview.mermaid-live-preview .node rect,
.dark-theme .code-block-live-preview.mermaid-live-preview .node circle,
.dark-theme .code-block-live-preview.mermaid-live-preview .node ellipse,
.dark-theme .code-block-live-preview.mermaid-live-preview .node polygon,
.dark-theme .code-block-live-preview.mermaid-live-preview .node path {
  fill: var(--bg-secondary, #374151);
  stroke: var(--border-color, #6b7280);
}

.dark-theme .mermaid-preview .cluster rect,
.dark-theme .mermaid-preview-content .cluster rect,
.dark-theme .mermaid-block-preview .cluster rect,
.dark-theme .code-block-live-preview.mermaid-live-preview .cluster rect {
  fill: var(--bg-tertiary, #1f2937);
  stroke: var(--border-color, #4b5563);
}

.dark-theme .mermaid-preview .nodeLabel,
.dark-theme .mermaid-preview .label,
.dark-theme .mermaid-preview text {
  fill: var(--text-color, #f3f4f6);
}

.dark-theme .mermaid-preview .edgePath path,
.dark-theme .mermaid-preview .flowchart-link {
  stroke: var(--text-secondary, #9ca3af);
}
